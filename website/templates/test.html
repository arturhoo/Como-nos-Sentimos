<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src="static/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="static/js/processing-1.3.6.min.js" type="text/javascript"></script>
    <title>Particle System</title>
    <script type="text/javascript">
    var pjs;
    function pjsSetTweet() {
      var text = "{{ tweets[0]['text'] }}";
      pjs.setTweet(text);
    }
    </script>
  </head>
  <body>
    <div id="div1">
      <canvas id="Sentimos" data-processing-sources="processing/Sentimos/Sentimos.pde processing/Sentimos/Particle.pde processing/Sentimos/Tweet.pde"></canvas>
    </div>    
    Tweets:
    <br>
    {% for tweet in tweets %}
      {{ tweet }}
      <br><br>
    {% endfor %}
    <script type="text/javascript">
    window.onload = function() {
      makeTheLink();
    }
    function makeTheLink() {
      pjs = Processing.getInstanceById("Sentimos");
      if(pjs == undefined) {
        setTimeout( makeTheLink, 200 );
        return;
      }
      pjsSetTweet();
    }
    </script>
  </body>
</html>
