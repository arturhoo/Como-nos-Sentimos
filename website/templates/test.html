<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src="static/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="static/js/processing-1.3.6.min.js" type="text/javascript"></script>
    <title>Particle System</title>
    
  </head>
  <body>
    <div id="div1">
      <canvas id="Sentimos" data-processing-sources="processing/Sentimos/Sentimos.pde processing/Sentimos/Particle.pde processing/Sentimos/Tweet.pde"></canvas>
    </div>    
    <div id="fromProcessing">
    </div>
    <!-- Tweets:
    <br>
    {% for tweet in tweets %}
      {{ tweet }}
      <br><br>
    {% endfor %} -->

    <!-- HTML to Processing -->
    <script type="text/javascript">
    function pjsSetTweet() {
      var text = "{{ tweet['text'] }}";
      pjs.setTweet(text);
    }
    </script>
    
    <!-- Processing to HTML -->
    <script type="text/javascript">
    function setFromProcessing(text) {
      document.getElementById('fromProcessing').innerHTML = text;
    }
    </script>
    
    <!-- Processing.js essentials -->
    <script type="text/javascript">
    window.onload = function() {
      var pjs;
      makeTheLink();
    }
    // afterLoad is used to load initial functions
    function afterLoad() {
      pjsSetTweet();
    }
    function makeTheLink() {
      pjs = Processing.getInstanceById("Sentimos");
      if(pjs == undefined) {
        setTimeout( makeTheLink, 200 );
        return;
      }
      pjs.setInterfaceLink(this);
      afterLoad();
    }
    </script>

  </body>
</html>
